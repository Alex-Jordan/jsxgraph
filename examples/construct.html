<!--<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html>-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
   <title>JSXGraph example</title>
   <link rel="stylesheet" type="text/css" href="../distrib/jsxgraph.css" />
    <script type="text/javascript" src="../src/loadjsxgraph.js"></script>
    <!--<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/jsxgraph/0.91/jsxgraphcore.js"></script>-->
    <!--<script type="text/javascript" src="http://jsxgraph.uni-bayreuth.de/distrib/jsxgraphcore-0.82.js"></script>-->
    <script type="text/javascript" src="../src/GeonextReader.js"></script>
    <script type="text/javascript" src="../src/CanvasRenderer.js"></script>
<style type="text/css">
</style>    
</head>
<body id="body">
<h1 id="x1"  onClick="JXG.JSXGraph.freeBoard(brd)">Playground</h1>
<div id='jxgbox' class='jxgbox' style='width:700px; height:500px;'></div>
<div id="debug" style='width:600px; height:200px; background-color:#eee'></div>

<script type='text/javascript'>
//JXG.Options.text.display = 'internal';
//JXG.Options.renderer = 'canvas';
var brd = JXG.JSXGraph.initBoard('jxgbox', {boundingbox:[-4,4,4,-4], keepaspectratio:true, showNavigation:true});


var p1 = brd.create('point',[0, 0], {face:'[]', withLabel:false});
var c1 = brd.create('circle',[p1, [2, 0]], {fillColor:'#ff000044', fillOpacity:1});
var p2 = brd.create('point',[-3, 1], {withLabel:false, name:'x2', labelColor:'#00000010'});
var l1 = brd.create('line',[p1, p2]);

var g1 = brd.create('glider',[2,2,c1]);
var s1 = brd.create('segment',[g1, p2]);
var p3 = brd.create('midpoint',[s1], {trace:false});

var cu = brd.create('curve',[[0],[0]]);
cu.updateDataArray = function(){
    var i, le = 50, step = 2*Math.PI/le,
        savePos = g1.position, el, pEl, from=false;

    this.dataX = [];
    this.dataY = [];
    for (i=0; i<=le; i++) {
        g1.position = savePos + i*step;
        from = false;
        for (el in this.board.objects) {
            pEl = this.board.objects[el];
            if (pEl==g1) { 
                from = true;
            }
            if (!from) {
                continue;
            }
            if (!pEl.needsRegularUpdate) { continue; }
            pEl.needsUpdate = true;
            pEl.update(true);
            if (pEl==p3) { 
                break;
            }
        }
        this.dataX[i] = p3.X();
        this.dataY[i] = p3.Y();
//        console.log(i, p3.X(), p3.Y());
    }
    g1.position = savePos;
};
brd.update();

</script> 
</body>
</html>
