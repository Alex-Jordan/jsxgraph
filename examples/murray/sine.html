<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
    <script type="text/javascript" src="http://jsxgraph.uni-bayreuth.de/distrib/jsxgraphcore.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=AM_HTMLorMML"></script>
    <style type="text/css">
        #fourier {
            /*position: absolute;*/
        }
    </style>
    <title></title>
</head>
<body>
<input type="button" id="rem" class="myButt" value="remove term">
<input type="button" id="add" class="myButt" value="add term">
<div id="jxgbox1" class="jxgbox explanation" style="width:100%;height:430px;border:none"></div>
<script type="text/javascript">
$(function(){
  window.terms=3;
  function displayFourier(terms){
    myText = "<p>`f(t) ~~ 2.5` ";
    if(terms > 1){
      myText += "`+10/pi(sin {: (pit)/4 :}";
    }
    for (i=2;i<terms;i++) {
      myText += "` `";
      myText += "+ 1/"+(2*i-1)+ "sin {:("+(2*i-1)+ "pit)/4:}";
    }
    if(terms > 1){
      myText += ")`</p>";
    }
    if(terms > 0 && terms < 13){
      window.terms = terms;
    }
    window.myText = myText;
    return [window.myText,window.terms]
  }
  var a = displayFourier(terms);
// Graph part
  board = JXG.JSXGraph.initBoard('jxgbox1');
  sv = 0;
  function plot(sv) { 
    JXG.JSXGraph.freeBoard(board);
    board = JXG.JSXGraph.initBoard('jxgbox1', 
          {axis:false, grid:false, boundingbox:[-4.5,17,26.5,-3.2],showCopyright:false,showNavigation:false, keepaspectratio:false});
    board.create('text',[-4.2,17,"<div id=\"fourier\">"+window.myText+"</div>"],{fontSize:12+'px',fixed:true} );
    board.create('segment',[[0,0],[0,6.5]],{strokeColor:'#444444', strokeWidth:1,lastArrow:true,fixed:true});
    board.create('segment',[[-4.5,0],[26,0]],{strokeColor:'#444444', strokeWidth:1,lastArrow:true,fixed:true});
    board.create('text',[0,-1,"0"],{fontSize:12+'px',fixed:true} ); 
    board.create('text',[-4,-1,"-4"],{fontSize:12+'px',fixed:true} );
    board.create('text',[4,-1,"4"],{fontSize:12+'px',fixed:true} );
    board.create('text',[8,-1,"8"],{fontSize:12+'px',fixed:true} );
    board.create('text',[12,-1,"12"],{fontSize:12+'px',fixed:true} );         
    board.create('text',[-1,2.5,"2.5"],{fontSize:12+'px',fixed:true} );    
    board.create('text',[-0.75,5,"5"],{fontSize:12+'px',fixed:true} );
    var myText = ''; 
    board.create('text',[-4.2,7.5,"<p>Number of terms = "+sv+"</p>"
    ],{fontSize:12+'px',fixed:true} );
    board.create('functiongraph', [
      function(t){
        var val = 2.5, i;
        for(i = 1; i < sv; i++) {
          val = val + (10/Math.PI)* 1/(2*i-1) * Math.sin(((2*i-1) * Math.PI * t)/4);
        }
        return val;
      },-4.5,16],{strokeColor:'#0000ff', strokeWidth:1});
    board.create('functiongraph', [
      function(t){
        var val = 2.5, i;
        for(i = 1; i < sv; i++) {
          val = val + (10/Math.PI)* 1/(2*i-1) * Math.sin(((2*i-1) * Math.PI * t)/4);
        }
        return val;
      },16,26],{strokeColor:'#6666ff', strokeWidth:1});      
    board.create('segment',[[16,2.5],[26,2.5]],{strokeColor:'#af33af', strokeWidth:1,fixed:true});
    if(sv == 1) {
      arrow = 6.5;
    } else {
      arrow = 4.4*Math.log(2*sv-1);
    }
    board.create('segment',[[16,0],[16,arrow]],{strokeColor:'#af33af', strokeWidth:1,lastArrow:true,fixed:true});
    for(k=1;k<sv;k++) {
      (function (_k) {
          return board.create('functiongraph',[
            function(t) { 
              return 4.2*Math.log(2*_k-1)+(10/Math.PI)*1/(2*_k-1)*Math.sin(((2*_k-1)*Math.PI*t)/4 ) 
            },16,26],{strokeColor:'#af33af',strokeWidth:1}); 
      }) (k);
    }
    copy = board.create('text',[-4,-2.3,"<span class=\"copy\">Copyright &copy; www.intmath.com</span>"],{fontSize:12+'px',fixed:true} );
  }  
  plot(terms);
// jQuery part  
  $('#fourier').html(myText);
  $('#rem').click(function(event){
    if(window.terms > 1) {
      $('#add').removeAttr('disabled');
      window.terms--; 
      displayFourier(window.terms);
      plot(window.terms);
      MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }else {
      $('#rem').attr('disabled','disabled');   
    }
  });  
  $('#add').click(function(event){
    if(window.terms < 12) {
      $('#rem').removeAttr('disabled');
      window.terms++;    
      displayFourier(window.terms);
      plot(window.terms);
      MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    } else {
      $('#add').attr('disabled','disabled');  
    }
  });   
})
</script>
</body>
</html>