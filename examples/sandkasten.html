<html>
<head>
    <title>JSXGraph example</title>
    <link rel="stylesheet" type="text/css" href="../distrib/jsxgraph.css" />
    <script type="text/javascript" src="http://jsxgraph.uni-bayreuth.de/distrib/MathJax/MathJax.js"></script>
    <!--script type="text/javascript" src="http://jsxgraph.uni-bayreuth.de/distrib/jsxgraphcore.js"></script-->
    <script type="text/javascript" src="../src/loadjsxgraph.js"></script>
    <script type="text/javascript" src="../src/CanvasRenderer.js"></script>
    <script type="text/javascript" src="../src/Square.js"></script>
</head>
<body>

<h2>Playground to test things temporarily. May change very often.</h2>

<a href="javascript:zoomPoints();">Zoom all points (new)</a><br />
<a href="javascript:brd.zoomAllPoints();">Zoom all points (old)</a><br />
<a href="javascript:zoomAll();">Zoom all elements (new)</a>

<div style="width:800px">
  <div id="jxgbox" class="jxgbox" style="width:800px; height:800px; float:left"></div>
</div>

<div id="debug" style="display:block;"></div>

<script type="text/javascript">
    /* <![CDATA[ */

    var hron = (function () {
        JXG.Options.layer.polygon = 4;
        JXG.Options.layer.image = 4;
        JXG.Options.layer.line = 4;
        JXG.Options.renderer = 'canvas';

        var board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-10, 10, 10, -10]}),
            p1 = board.create('point', [-3, -5]),
            p2 = board.create('point', [2, -2]),
            p3 = board.create('point', [7, 6]),
            poly = board.create('polygon', [p1, p2 , p3]),
            img = board.create('image', ['http://www.webresourcesdepot.com/wp-content/uploads/image/jsxgraph.gif', [0, 0], [3, 3]]),
            p4 = board.create('point', [-3, 2]),
            p5 = board.create('point', [4, 5]),
            l = board.create('line', [p4, p5], {strokeWidth: 10});
    })();

    var drei = (function () {
        JXG.Options.renderer = 'svg';
        var board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-50, 50, 50, -50]}),
            cs = [
                [-10, -5, -1], [-10, 1, -1], [-10, -5, 1], [-10, 1, 1],
                [1, -5, -1], [1, 1, -1], [1, -5, 1], [1, 1, 1]
            ],
            ps = [],
            pr = function (a) {
                var c = [0, -50, 50],
                    look_at = [0, 0, 0],
                    theta = [0, 0, 0],
                    //theta = [0, Math.PI/8, Math.PI/8],
                    dx, dy, dz;

                dx = Math.cos(theta[1])*(Math.sin(theta[2])*(a[1]-c[1])+Math.cos(theta[2])*(a[0]-c[0]))-Math.sin(theta[1])*(a[2]-c[2]);
                dy = Math.sin(theta[0])*(Math.cos(theta[1])*(a[2]-c[2])+Math.sin(theta[1])*(Math.sin(theta[2])*(a[1]-c[1])+Math.cos(theta[2])*(a[0]-c[0])))+Math.cos(theta[0])*(Math.cos(theta[2])*(a[1]-c[1])-Math.sin(theta[2])*(a[0]-c[0]));
                dz = Math.cos(theta[0])*(Math.cos(theta[1])*(a[2]-c[2])+Math.sin(theta[1])*(Math.sin(theta[2])*(a[1]-c[1])+Math.cos(theta[2])*(a[0]-c[0])))-Math.sin(theta[0])*(Math.cos(theta[2])*(a[1]-c[1])-Math.sin(theta[2])*(a[0]-c[0]));

                return [dx, dy];
            },
            i, co;

        for (i = 0; i < cs.length; i++) {
            co = pr(cs[i]);
            ps.push(board.create('point', co));
        }

        // back
        board.create('segment', [ps[0], ps[1]]);
        board.create('segment', [ps[2], ps[3]]);
        board.create('segment', [ps[0], ps[2]]);
        board.create('segment', [ps[1], ps[3]]);

        // front
        board.create('segment', [ps[4], ps[5]]);
        board.create('segment', [ps[6], ps[7]]);
        board.create('segment', [ps[4], ps[6]]);
        board.create('segment', [ps[5], ps[7]]);

        // left
        board.create('segment', [ps[0], ps[4]]);
        board.create('segment', [ps[2], ps[6]]);

        // right
        board.create('segment', [ps[1], ps[5]]);
        board.create('segment', [ps[3], ps[7]]);
    });

    var radaxes = (function () {
        JXG.Options.renderer = 'svg';
        var board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-5, 5, 5, -5]}),
            ct1 = board.create('point', [0, 3]),
            ct2 = board.create('point', [-4, -2]),
            ct3 = board.create('point', [4, -1]),
            cc = board.create('circumcircle', [ct1, ct2, ct3], {
                strokeColor: 'red',
                point: {
                    face: 'x',
                    visible: true,
                    name: null,
                    withLabel: true
                }
            }),
            ptest = board.create('point', [0, 0]),
            xaxis = board.create('axis', [[0, 0], [1, 0]], {
                ticks: {
//                    minTicksDistance: 0,
                    ticksDistance: 2,
                    insertTicks: true,
                    minorTicks: 3,
                    minorHeight: 10
                }
            });
    });

    var tyrus = (function () {
        //JXG.Options.renderer = 'canvas';
        var board = JXG.JSXGraph.initBoard('jxgbox');

        var line1 = board.create('line', [[0, 0], [1, 0]], {strokeWidth: 1});
        var line2 = board.create('line', [[0, 0], [1, 1]], {strokeWidth: 1});

        var ticks = board.create('ticks', [line1, 1], {
            minTicksDistance: 10,
            insertTicks: true,
            drawLabels: true
        });

        //var graph1 = board.create('functiongraph', [function(x){ return 0}, -2, 4] ,{strokeWidth:1});
        //var graph2 = board.create('functiongraph', [function(x){ return 1/2*x}, -2, 4] ,{strokeWidth:1});
        //var graph3 = board.create('functiongraph', [function(x){ return x}, -2, 4] ,{strokeWidth:1});
        //var graph4 = board.create('functiongraph', [function(x){ return 2*x}, -2, 4] ,{strokeWidth:1});
    });

    var eulerline = (function () {

        var board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-1.5, 2, 1.5, -1], keepaspectratio:true});

        var cerise = {
                strokeColor: '#901B77',
                fillColor: '#CA147A'
            },

            grass = {
                strokeColor: '#009256',
                fillColor: '#65B72E',
                visible: true,
                withLabel: true
            },

            perpendicular = {
                strokeColor: 'black',
                dash: 1,
                strokeWidth: 1,
                point: JXG.deepCopy(cerise, {
                    visible: true,
                    withLabel: true
                })
            },

            median = {
                strokeWidth: 1,
                strokeColor: '#333333',
                dash:2
            },

            A = board.create('point', [1, 0], cerise),
            B = board.create('point', [-1, 0], cerise),
            C = board.create('point', [0.2, 1.5], cerise),
            pol = board.create('polygon',[A,B,C], {
                fillColor: '#FFFF00',
                lines: {
                    strokeWidth: 2,
                    strokeColor: '#009256'
                }
            });

        var pABC, pBCA, pCAB, i1;
        perpendicular.point.name = 'H_c';
        pABC = board.create('perpendicular', [pol.borders[0], C], perpendicular);
        perpendicular.point.name = 'H_a';
        pBCA = board.create('perpendicular', [pol.borders[1], A], perpendicular);
        perpendicular.point.name = 'H_b';
        pCAB = board.create('perpendicular', [pol.borders[2], B], perpendicular);
        grass.name = 'H';
        i1 = board.create('intersection', [pABC[0], pCAB[0], 0], grass);

        var mAB, mBC, mCA;
        cerise.name = 'M_c';
        mAB = board.create('midpoint', [A, B], cerise);
        cerise.name = 'M_a';
        mBC = board.create('midpoint', [B, C], cerise);
        cerise.name = 'M_b';
        mCA = board.create('midpoint', [C, A], cerise);

        var ma, mb, mc, i2;
        ma = board.create('segment', [mBC, A], median);
        mb = board.create('segment', [mCA, B], median);
        mc = board.create('segment', [mAB, C], median);
        grass.name = 'S';
        i2 = board.create('intersection', [ma, mc, 0], grass);

        var c;
        grass.name = 'U';
        c = board.create('circumcircle',[A, B, C], {
            strokeColor: '#000000',
            dash: 3,
            strokeWidth: 1,
            point: grass
        });

        var euler;
        euler = board.create('line', [i1, i2], {
            strokeWidth: 2,
            strokeColor:'#901B77'
        });
    });


    old = (function () {
    function zoomAll () {
        brd.zoomElements([li]);//JXG.keys(brd.objects));
    }

    function zoomPoints() {
        var e, points = [];

        for (e in brd.objects) {
            if (JXG.isPoint(brd.objects[e]) && brd.objects[e].visProp.visible) {
                points.push(brd.objects[e]);
            }
        }

        brd.zoomElements(points);
    }

    JXG.Options.renderer = 'canvas';
    JXG.Options.text.useMathJax = false;
    JXG.Options.showCopyright = false;

    var brd = JXG.JSXGraph.initBoard('jxgbox', {axis: true, boundingbox:[-5, 5, 5, -5], grid: false, keepaspectratio: true});

    p1 = brd.create('point', [0,0], {withLabel: false});
    p1.setProperty({withLabel: true});

    p2 = brd.create('point', [2,1], {strokeColor: 'green', fillColor: 'green', fixed: true});
    p3 = brd.create('point', [0,1]);
    p4 = brd.create('point', [4,2], {name: "Z"});

    cca = brd.create('circle', [p1, p2]);

    sq = brd.create('square', [p1, p3]);

    li= brd.create('segment', [p3, p4]);
    t = brd.create('text', [4, 5, 'foobar'], {parent: cca, withLabel: false});

    pol = brd.create('polygon', [p1, p2, p3, p4], {
        lines: {
            ids: ['borderid1', 'borderid2', 'borderid3', 'borderid4'],
            colors: ['yellow', 'green', 'red'],
            strokeWidth: 7
        }
    });

    sli = brd.create('slider', [[1, 1], [3, 1], [0, 1, 3]], {
        glider: {
            fillColor: 'green'
        },
        point1: {
            visible: true
        }
    });

    ax = brd.create('ticks', [li, 2]);

    p1.setProperty({
        color: '#00ff00',
        opacity: 0.5,
        size: 15,
        face: 'x',
        strokeWidth: 10,
        shadow: true,
        draft: false
    });

    li.setProperty({
        straightFirst: true,
        straightLast: true,
        dash: 2,
        firstArrow: true
    });


    oldie = 2;

    a = brd.create('polygon', [p1, p2, p3]);
    c = brd.create('circle', [p4, 3], {withLabel: true});

    l = brd.create('axis', [p1, p4], {ticks: {ticksDistance: 1, insertTicks: false}});
    //ti = brd.create('ticks', [l, 1], {drawLabels: false});

    t = brd.create('text', [1, 3, function () { return '\\[e^x\\]'}]);

    bigboy = brd.create('text', [1, 3, 'big boy']);

    fun = brd.create('functiongraph', [function (x) { return p3.X() * Math.sin(x); }, -3, 3], {withLabel: true});

    h = function () {
        if (oldie < 0 && p4.Y() > 0) {
            bigboy.setText('big boy');
        }

        if (oldie > 0 && p4.Y() < 0) {
            bigboy.setText('lil boy');
        }
        oldie = p4.Y();
    };

    brd.addHook(h);
    })

    //brd.update();

    /* ]]> */
</script>
</body>
</html>
