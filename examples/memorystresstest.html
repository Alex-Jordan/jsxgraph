<!--<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html>-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
<head>
   <title>JSXGraph example</title>
    <link rel="stylesheet" type="text/css" href="../distrib/jsxgraph.css" />
    <script type="text/javascript" src="../src/loadjsxgraph.js"></script>
    <script type="text/javascript" src="../src/GeonextReader.js"></script>
    <script type="text/javascript" src="../src/CanvasRenderer.js"></script>
    
</head>
<body id="body">
<h1>Memory stress test</h1>
<div id='jxgbox' class='jxgbox' style='width:600px; height:600px;'></div>

<script type='text/javascript'>
//JXG.Options.text.display = 'internal';
//JXG.Options.renderer = 'canvas';
//JXG.Options.grid.snapToGrid = true;

//JXG.Options.axis.visible = false;
//JXG.Options.axis.ticks.drawLabels = true;
//JXG.Options.axis.ticks.drawZero = true;
//JXG.Options.axis.withLabel = false;

//
// Memory stress test
var brd = null;
function doit() {
    if(brd != undefined){
        JXG.JSXGraph.freeBoard(brd);
    } 

    JXG.Options.precision.hasPoint = 0; 
    brd = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-10, 90, 380, -10], axis:false, grid:false, showCopyright:false, showNavigation:false});
    
    var p = [], i;
    for (i=0; i<1500; i++) {
        p[i] = brd.create('point', [Math.random()*370, Math.random()*80], {name:'', withLabel:false});
    }
    var pol = brd.create('polygon', p, {highlight:false, name:'XXXXXXXX'});
    
    cnt++;
    if (cnt<10) {
        setTimeout(doit, 500);
    } else {
        alert("DONE");
    }
}    

cnt = 0;
setTimeout(doit, 1000);

</script> 
</body>
</html>
