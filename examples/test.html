<html>
<head>
   <title>JSXGraph example</title>
   <link rel="stylesheet" type="text/css" href="../distrib/jsxgraph.css" />
   <script type="text/javascript" src="../src/loadjsxgraph.js"></script>
   <script type="text/javascript" src="../src/Roulette.js"></script>
</head>
<body>
<h2>Roulettes</h2>
<form>
<input type="button" value="start" onclick="rol3.start();rol5.start()">
<input type="button" value="stop" onclick="rol3.stop();rol5.stop()">
<input type="button" value="one step" onclick="rol5.rolling()">
</form>
<div id="jxgbox" class="jxgbox" style="width:1000px; height:500px;"></div>
<div id="debug" style="display:block;"></div>
<script type="text/javascript">
    /* <![CDATA[ */


var brd = JXG.JSXGraph.initBoard('jxgbox',{boundingbox:[-2,7,20,-3], keepaspectratio:true});
brd.renderer.container.style.backgroundColor = '#3d1c24';          // background color board
 
brd.suspendUpdate();
// Pentagon
var A = brd.create('point',[-2,-2]);
var B = brd.create('point',[0,0]);
var pol5 = brd.create('regularpolygon',[A,B,5], {withLines:false, fillColor:'none', highlightFillColor:'none', fillOpacity:0.0});
for (var i=0;i<5;i++) pol5.vertices[i].setProperty({color:'#3d1c24'});
 
// Triangle
var C = brd.create('point',[-2,-2]);
var D = brd.create('point',[C.X()+3/5*(1+Math.sqrt(5))*0.5*A.Dist(B), C.Y()]);
var pol3 = brd.create('regularpolygon',[C,D,3], {withLines:false, fillColor:'none', highlightFillColor:'none', fillOpacity:0.0});
for (i=0;i<3;i++) pol3.vertices[i].setProperty({color:'#3d1c24'});
 
var line = brd.create('curve',[function(t){return t;}, function(t){return -2;}], 
                {strokeWidth:6, strokeColor:'#d66d55', fillColor:'#d6bb55', highlightFillColor:'#d6bb55'});
var reuleauxPentagon = brd.create('curve', JXG.Math.Numerics.reuleauxPolygon(pol5.vertices, 5), 
       {strokeWidth:6, strokeColor:'#d66d55', fillColor:'#ad5544', highlightFillColor:'#ad5544'});
var reuleauxTriangle = brd.create('curve', JXG.Math.Numerics.reuleauxPolygon(pol3.vertices, 3), 
       {strokeWidth:6, strokeColor:'#d66d55', fillColor:'#703545', highlightFillColor:'#703545'});
brd.unsuspendUpdate();
 
var rol5 = JXG.Math.Numerics.createRoulette(line, reuleauxPentagon, -2, Math.PI/45, 1, 100, [A,B,C,D]); 
var rol3 = JXG.Math.Numerics.createRoulette(reuleauxPentagon, reuleauxTriangle, 6*Math.PI/5, Math.PI/45, -1, 40, [C,D]);//rollen();
/*
*/
/*    
var p1 = brd2.create('point', [0,0], {style:6, name:'p1'});
var s = brd2.create('slider', [[-1,-1],[2,-1],[0,Math.PI/2,2*Math.PI]], {name:'angle'});

var sq = [];
sq[0] = brd2.create('point', [0,-2], {style:10});
sq[1] = brd2.create('point', [2,2], {style:10});
sq[2] = brd2.create('point', [1,1], {style:10});
sq[3] = brd2.create('point', [2,-2], {style:10});
var pol = brd2.create('polygon',sq);

var rot = brd2.create('transform', [function(){return s.Value();},p1], {type:'rotate'});
rot.bindTo(sq);
brd2.create('group',[p1].concat(sq));

var p2 = brd2.create('point', [2,0], {name:'p2', style:7,trace:false});
rot.bindTo(p2);
brd2.update();  // why update? 
*/
/*
JXG.Options.text.useASCIIMathML = true;
JXG.Options.point.face = '<>';
JXG.Options.point.size = 10;
JXG.Options.text.fontSize = 18;
var board = JXG.JSXGraph.initBoard('jxgbox', {boundingbox: [-1, 5, 10, -1], axis:false});
var dataArr = [4,1,3,2,5,7,1.5,2];
//var a = board.createElement('chart', dataArr, {chartStyle:'bar',width:0.6,labels:dataArr});
var t = board.createElement('point',[7,1]);
var t2 = board.createElement('text',[1,1,'sum_(i=1)^n (x^i)']);
*/

/* ]]> */
</script>
<form><input type="button" value="Export SVG" onClick="document.getElementById('out').value = XMLSerializer().serializeToString(brd.renderer.svgRoot);"> 
<br>
<textarea id="out" rows=10 cols=60>
</textarea>
</form>

</body>
</html>
